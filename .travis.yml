language: php
services:
- redis-server
php:
- 7.0
node_js: '7'
before_install:
- nvm install 6.9
- nvm use 6.9
install:
- npm install -g yarn
before_script:
- cd backend/
- cp .env.travis .env
- mysql -e 'create database homestead_test;'
- composer self-update
- composer install --no-interaction
- php artisan key:generate
- php artisan migrate --env=testing --no-interaction -vvv
- php artisan db:seed --env=testing --no-interaction -vvv
- cd ..
- cd frontend/
- yarn install
- cp src/config.example.js src/config.js
- cd ..
script:
- cd backend/
- vendor/bin/phpunit --verbose --coverage-text --coverage-clover=coverage.xml
- cd ..
- cd frontend/
- npm test -- --coverage
- cd ..
after_success:
- cd backend/
- bash <(curl -s https://codecov.io/bash)
- cd ..
- cd frontend/
- bash <(curl -s https://codecov.io/bash)
- cd ..
notifications:
  slack:
    secure: cODB11k0N06HrpN6S+aARdv/tRcoK654TjTDNrIEVqrMsay1ljm3gXwKTCwZ7AiE4WdvUwK5OrMc3boBI01gZoIol3xsXd5WEFfmsTROY3pPuWUSWIklRHcLFJpK7z0U1SjlYp8WG6zTBAKRnacGpEC8JJdCxvA7CvyQ70WqeF+4qM3RAgydCCV0mPmVLlaJJ4QWBTijsP/4nstV7R2Dy9zu3sw6PaGC1lG+isDro+n4UaDcmbaOtiVUSlgu+OQTOk2IWFdfmT3q+T/XAI+2kB/hlk52v/jQ+mOcXFr5fL4tc7TJ0eWZ+tXKdOVNxh7iYrudpd7dJRU02/RRQ9dSUOapAhjBmiTROWeqRfPLDthe3XSTcnv/EuT+fwOZQyuYgAWMRtHuzRMCkVFonTo0FYR4l0/lQFywzJztIOtzjZxfUbONLq5huV+j+quhoDWKR+yIl55Z4e0RZRaBmdBLAMXA9wuts/CtgJWYLUUT+YxDEtrW7d7ASJXTeKOoUallwHOLgZJptDrnu17KVX0aiF/CsVIr0nyV1GbkAi70CVby4/I/fF93EXL7a3tqTCtBMTmB9rV1LpLlxHoYTl8WO72911cWGksLgvm1enGvNUav2zvCJawFNQWQnwaSIWmLDzhsRTXTHYJ1Ns3dVC95EZMnWas7rMA9Z7YzO+24Ev0=
